# 本番環境最終確認チェックリスト

## 概要

英会話カフェWebサイトの本番環境での動作確認、セキュリティ監視設定、バックアップ設定確認のためのチェックリスト。

## 実行日時

- **確認実施日**: [実施日を記入]
- **確認者**: [確認者名を記入]
- **環境**: 本番環境
- **フロントエンド URL**: https://english-cafe-website.vercel.app
- **バックエンド URL**: https://english-cafe-backend.onrender.com

---

## 1. 基本動作確認

### 1.1 フロントエンド動作確認

- [ ] **ホームページ (/)** 
  - [ ] ページが正常に表示される
  - [ ] ヒーローセクションが表示される
  - [ ] ナビゲーションメニューが動作する
  - [ ] レスポンシブデザインが適用されている

- [ ] **講師一覧ページ (/instructors)**
  - [ ] 講師一覧が表示される
  - [ ] 講師カードが正しく表示される
  - [ ] 講師詳細ページへのリンクが動作する

- [ ] **レッスンページ (/lessons)**
  - [ ] レッスン情報が表示される
  - [ ] 料金表が正しく表示される
  - [ ] レッスンタイプ別の情報が表示される

- [ ] **問い合わせページ (/contact)**
  - [ ] 問い合わせフォームが表示される
  - [ ] フォームバリデーションが動作する
  - [ ] Google Mapsが表示される
  - [ ] SNS連携ボタンが表示される

### 1.2 バックエンドAPI動作確認

- [ ] **ヘルスチェック (/health)**
  - [ ] HTTP 200レスポンスが返される
  - [ ] レスポンス時間が3秒以内

- [ ] **システム監視 (/api/monitoring/health)**
  - [ ] システム状態が正常に返される
  - [ ] データベース接続状態が確認できる

- [ ] **システム統計 (/api/monitoring/stats)**
  - [ ] 統計情報が正常に返される
  - [ ] 認証が必要な場合は適切に保護されている

### 1.3 問い合わせフォーム機能確認

- [ ] **フォーム送信テスト**
  - [ ] 有効なデータでフォーム送信が成功する
  - [ ] バリデーションエラーが適切に表示される
  - [ ] 送信完了メッセージが表示される
  - [ ] データベースに正しく保存される

---

## 2. セキュリティ確認

### 2.1 セキュリティヘッダー確認

#### フロントエンド (Vercel)
- [ ] **X-Content-Type-Options**: nosniff
- [ ] **X-Frame-Options**: DENY または SAMEORIGIN
- [ ] **Referrer-Policy**: strict-origin-when-cross-origin
- [ ] **Strict-Transport-Security**: max-age設定済み
- [ ] **Content-Security-Policy**: 適切に設定済み

#### バックエンド (Render)
- [ ] **X-Content-Type-Options**: nosniff
- [ ] **X-Frame-Options**: DENY
- [ ] **X-XSS-Protection**: 1; mode=block
- [ ] **Referrer-Policy**: strict-origin-when-cross-origin
- [ ] **Strict-Transport-Security**: max-age設定済み

### 2.2 HTTPS確認

- [ ] **フロントエンド**: 全ページでHTTPS接続
- [ ] **バックエンド**: 全APIエンドポイントでHTTPS接続
- [ ] **HTTP→HTTPSリダイレクト**: 自動リダイレクト動作確認

### 2.3 入力値検証確認

- [ ] **SQLインジェクション対策**: パラメータ化クエリ使用確認
- [ ] **XSS対策**: 入力値サニタイゼーション確認
- [ ] **CSRF対策**: トークン検証確認（該当する場合）

---

## 3. パフォーマンス確認

### 3.1 応答時間確認

- [ ] **フロントエンド**: 初回読み込み5秒以内
- [ ] **バックエンドAPI**: ヘルスチェック3秒以内
- [ ] **問い合わせフォーム**: 送信処理5秒以内

### 3.2 Lighthouseスコア確認

- [ ] **Performance**: 80以上
- [ ] **Accessibility**: 90以上
- [ ] **Best Practices**: 80以上
- [ ] **SEO**: 80以上

### 3.3 リソース最適化確認

- [ ] **画像最適化**: WebP形式使用、適切なサイズ
- [ ] **CSS/JS最適化**: 圧縮・最小化済み
- [ ] **キャッシュ設定**: 適切なキャッシュヘッダー設定

---

## 4. 監視・ログ設定確認

### 4.1 エラー監視

- [ ] **フロントエンドエラー監視**
  - [ ] JavaScript エラーの記録
  - [ ] ユーザーエラーレポート機能
  - [ ] エラーページの表示確認

- [ ] **バックエンドエラー監視**
  - [ ] API エラーログの記録
  - [ ] データベースエラーの監視
  - [ ] システムエラーアラート設定

### 4.2 アップタイム監視

- [ ] **外部監視サービス設定**
  - [ ] フロントエンドのアップタイム監視
  - [ ] バックエンドAPIのアップタイム監視
  - [ ] アラート通知設定（メール/Slack等）

### 4.3 ログ管理

- [ ] **アクセスログ**
  - [ ] フロントエンドアクセスログ記録
  - [ ] バックエンドAPIアクセスログ記録
  - [ ] ログローテーション設定

- [ ] **アプリケーションログ**
  - [ ] エラーログの適切な記録
  - [ ] デバッグ情報の記録レベル設定
  - [ ] ログの保存期間設定

---

## 5. バックアップ設定確認

### 5.1 データベースバックアップ

- [ ] **自動バックアップ設定**
  - [ ] 日次バックアップスケジュール設定
  - [ ] バックアップデータの保存場所確認
  - [ ] バックアップデータの暗号化確認

- [ ] **バックアップ復旧テスト**
  - [ ] バックアップからの復旧手順確認
  - [ ] 復旧時間の測定
  - [ ] データ整合性の確認

### 5.2 アプリケーションバックアップ

- [ ] **ソースコード管理**
  - [ ] GitHubリポジトリの最新状態確認
  - [ ] タグ付けによるバージョン管理
  - [ ] ブランチ保護設定確認

- [ ] **設定ファイルバックアップ**
  - [ ] 環境変数設定のバックアップ
  - [ ] デプロイ設定のバックアップ
  - [ ] SSL証明書設定のバックアップ

---

## 6. 災害復旧計画確認

### 6.1 復旧手順書

- [ ] **サービス復旧手順**
  - [ ] フロントエンド復旧手順書作成済み
  - [ ] バックエンド復旧手順書作成済み
  - [ ] データベース復旧手順書作成済み

- [ ] **緊急連絡体制**
  - [ ] 緊急時連絡先リスト作成済み
  - [ ] エスカレーション手順確認済み
  - [ ] 外部サービス（Vercel/Render）サポート連絡先確認済み

### 6.2 復旧時間目標 (RTO/RPO)

- [ ] **RTO (Recovery Time Objective)**
  - [ ] フロントエンド: 1時間以内
  - [ ] バックエンド: 2時間以内
  - [ ] データベース: 4時間以内

- [ ] **RPO (Recovery Point Objective)**
  - [ ] データ損失許容時間: 24時間以内
  - [ ] バックアップ頻度との整合性確認

---

## 7. コンプライアンス確認

### 7.1 個人情報保護

- [ ] **データ保護**
  - [ ] 問い合わせデータの暗号化確認
  - [ ] アクセス制御の実装確認
  - [ ] データ削除機能の実装確認

- [ ] **プライバシーポリシー**
  - [ ] プライバシーポリシーページの表示確認
  - [ ] データ利用目的の明記確認
  - [ ] 問い合わせ時の同意取得確認

### 7.2 アクセシビリティ

- [ ] **WCAG 2.1 AA準拠**
  - [ ] キーボードナビゲーション対応
  - [ ] スクリーンリーダー対応
  - [ ] 色覚対応・コントラスト比確認

---

## 8. 運用準備確認

### 8.1 ドキュメント整備

- [ ] **運用マニュアル**
  - [ ] 日常運用手順書
  - [ ] トラブルシューティングガイド
  - [ ] 定期メンテナンス手順書

- [ ] **技術ドキュメント**
  - [ ] システム構成図
  - [ ] API仕様書
  - [ ] データベース設計書

### 8.2 運用体制

- [ ] **責任者・担当者**
  - [ ] システム管理者の指定
  - [ ] 運用担当者の指定
  - [ ] 緊急時対応者の指定

- [ ] **定期作業**
  - [ ] 定期バックアップ確認作業
  - [ ] セキュリティアップデート作業
  - [ ] パフォーマンス監視作業

---

## 9. 最終確認

### 9.1 自動チェック実行

```bash
# 本番環境自動チェックスクリプト実行
./scripts/production-check.sh

# 結果確認
cat production-check-results-*.txt
```

### 9.2 手動確認

- [ ] **ユーザー視点での動作確認**
  - [ ] 各デバイス（PC、タブレット、スマートフォン）での表示確認
  - [ ] 各ブラウザ（Chrome、Firefox、Safari、Edge）での動作確認
  - [ ] 問い合わせフローの完全な動作確認

- [ ] **管理者視点での動作確認**
  - [ ] 管理者ログイン機能確認
  - [ ] 問い合わせ管理機能確認
  - [ ] システム監視機能確認

### 9.3 最終承認

- [ ] **技術責任者承認**: [署名・日付]
- [ ] **プロジェクトマネージャー承認**: [署名・日付]
- [ ] **クライアント承認**: [署名・日付]

---

## 10. 本番リリース後の監視計画

### 10.1 初期監視期間（リリース後1週間）

- [ ] **24時間監視体制**
  - [ ] システム稼働状況の継続監視
  - [ ] エラー発生時の即座対応
  - [ ] ユーザーからの問い合わせ対応

### 10.2 通常監視期間（リリース後1週間以降）

- [ ] **定期監視**
  - [ ] 日次システム状態確認
  - [ ] 週次パフォーマンス確認
  - [ ] 月次セキュリティ確認

---

## 備考

### 確認時の注意事項

1. **テスト環境との差異**: 本番環境特有の設定や制限事項を考慮
2. **外部サービス依存**: YouTube API、Google Maps API等の利用制限確認
3. **無料プラン制限**: Vercel、Renderの無料プラン制限の監視
4. **SSL証明書**: 証明書の有効期限と自動更新設定確認
5. **ドメイン設定**: DNS設定とドメイン有効期限確認

### トラブル時の対応

1. **即座の対応**: 重大な問題発見時は即座にサービス停止を検討
2. **ロールバック**: 問題のあるデプロイの即座ロールバック
3. **ユーザー通知**: サービス停止時のユーザー通知方法
4. **復旧作業**: 段階的な復旧作業と動作確認

---

**最終更新日**: 2024年12月14日  
**作成者**: 開発チーム  
**承認者**: プロジェクトマネージャー